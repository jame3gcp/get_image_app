# 맞춤형 디지털 아트 & 인테리어 포스터 제작 서비스 --- 기능 명세서 (Next.js + OpenAI GPT-4o API)

> 목적: 사용자가 원하는 **스타일/주제/사이즈**로 이미지를 생성하고,
> **온라인 전시--인쇄--액자 주문**까지 이어지는 원스톱 웹앱 구축\
> 기술 스택: **Next.js (App Router, TS)**, **OpenAI GPT-4o
> (gpt-image-1)**, **Tailwind + shadcn/ui**, **PostgreSQL/Prisma**,
> **S3(이미지 저장)**, **NextAuth**, **Stripe**

------------------------------------------------------------------------

## 1) 핵심 사용자 시나리오 (User Flow)

1.  **탐색**
    -   홈 → 갤러리(추천/신작/베스트) → 상세 페이지
2.  **생성**
    -   "이미지 생성" → **프롬프트** 입력 → **스타일(natural/vivid)**,
        **사이즈/비율(정사각형/수평/수직)**, **샘플 수**, **참고
        이미지(선택)** 업로드 → 생성
3.  **리파인**
    -   결과 썸네일 확인 → **변형/리롤**, **업스케일(HD)**,
        **색조/밝기/여백 옵션** → 최종 확정
4.  **주문**
    -   **인쇄 옵션**(용지, 사이즈, 여백, 매트/광택, 액자/캔버스) 선택 →
        장바구니 → 결제(Stripe)
5.  **전시/공유**
    -   개인 **마이갤러리**(공개/비공개), 링크 공유, 소셜 공유
6.  **관리**
    -   관리자: 작품/주문/정책/가격 관리, 콘텐츠 큐레이션

------------------------------------------------------------------------

## 2) 기능 모듈 (Feature Breakdown)

### A. 이미지 생성

-   **프롬프트 입력**: 제목, 상세 설명, 금지 요소(옵션)
-   **스타일**: `natural` / `vivid`
-   **사이즈/종횡비**:
    -   1024×1024 (정사각), 1792×1024 (가로), 1024×1792 (세로)
-   **고급 옵션**:
    -   샘플 수(1--4), 시드(옵션), 배경 투명(로고/스티커용),
        업스케일(HD)
-   **안전 옵션**: 민감/저작권/인물 보호 가이드라인 체크

### B. 결과 관리

-   **리롤/변형**(prompt refine), **업스케일/리사이즈**, **간단
    편집(여백, 크롭, 회전, 색조/명암)**
-   **메타데이터**: 프롬프트/설정/버전 이력

### C. 온라인 전시(갤러리)

-   목록: 신작, 추천, 베스트, 테마별
-   필터: 스타일/비율/컬러 톤/가격
-   상세: 고해상 미리보기, 메타, 유사작 추천

### D. 인쇄/주문

-   인쇄 스펙: 사이즈, 용지(매트/글로시), 여백, 액자/캔버스
-   **가격 계산**: 이미지 라이선스 + 인쇄/액자 + 배송
-   결제: Stripe 카드/애플페이/구글페이
-   주문 상태: 제작중 → 출고 → 배송중 → 배송완료(트래킹)

### E. 계정/권한

-   NextAuth(Email/OAuth)
-   역할: `USER`, `CREATOR`, `ADMIN`
-   마이페이지: 생성 내역, 즐겨찾기, 주문/영수증, 라이선스 확인

### F. 관리(ADMIN)

-   작품 승인/비공개 처리
-   가격/쿠폰/이벤트
-   신고/저작권 이슈 처리 워크플로(증빙 업로드, 임시 차단)
-   로그/모니터링(요청 수, 실패율, 비용)

------------------------------------------------------------------------

## 3) API 설계 (App Router 기반 예시)

### 3.1 OpenAI GPT-4o 이미지 생성 (서버 라우트)

`POST /api/images/generate` - **Request (JSON)**
`json   {     "prompt": "북유럽 미니멀 인테리어에 어울리는 추상풍 오브제",     "style": "vivid",      "size": "1024x1792",     "n": 2,     "transparent": false,     "hd": true   }` -
**Process** - 서버에서 OpenAI GPT-4o API(`gpt-image-1`) 호출 -
응답(바이너리/URL)을 S3 업로드 → DB 메타 저장 - **Response**
`json   {     "artworks": [       { "id": "art_123", "url": "https://s3/..", "width": 1024, "height": 1792, "style": "vivid" }     ]   }`

### 3.2 이미지 변형/업스케일

`POST /api/images/variations` - body:
`{ "artworkId": "art_123", "promptDelta": "채도를 조금 낮추고 여백 5%" }` -
처리: 기존 프롬프트 + delta로 재생성 → 새 버전 저장

------------------------------------------------------------------------

## 4) 참고 자료 (Cookbook)

-   [Generate images with GPT Image
    (Cookbook)](https://cookbook.openai.com/examples/generate_images_with_gpt_image?utm_source=chatgpt.com)
-   [Introduction to GPT-4o and GPT-4o mini
    (Cookbook)](https://cookbook.openai.com/examples/gpt4o/introduction_to_gpt4o?utm_source=chatgpt.com)
-   [Using GPT-4o mini to tag & caption images
    (Cookbook)](https://cookbook.openai.com/examples/tag_caption_images_with_gpt4v?utm_source=chatgpt.com)

------------------------------------------------------------------------

## 5) 수익/과금(예시)

-   **프리미엄 크레딧**: 기본 5장 무료, 추가 크레딧 판매
-   **인쇄 마진**: 원가+마진, 액자/캔버스 옵션별 가산
-   **구독**: Pro(월 Y장 + 상업 라이선스 포함)
-   **B2B**: 인테리어 스튜디오용 볼륨 플랜, 화이트라벨
